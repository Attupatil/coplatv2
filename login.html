<!DOCTYPE html>
<html>
  <head>
    <title>Google Authentication </title>
    <link rel="stylesheet" href="./css/log.css">
    </head>

    <body>
<div id="login-button">
    <div class="img">
    <img src="https://dqcgrsy5v35b9.cloudfront.net/cruiseplanner/assets/img/icons/login-w-icon.png">
    </img>
    </div>
  </div>
  <div id="container">
    <h1>Log In</h1>
    <span class="close-btn">
      <a href="./Home.html">
      <img src="https://cdn4.iconfinder.com/data/icons/miu/22/circle_close_delete_-128.png"></img>
      </a>
    </span>
  
    <form class="form">
      <input type="username" name="username" placeholder="User">
      <input type="password" name="pass" placeholder="Password">
      <a href="#">Log in</a>
      
      <div id="remember-container">
        <input type="checkbox" id="checkbox-2-1" class="checkbox" checked="checked"/>
        <span id="remember">Remember me</span>
        <span id="forgotten">Forgotten password</span>
      </div>
  </form>
  </div>
  <!-- Forgotten Password Container -->
  <div id="forgotten-container">
     <h1 fontsize="200%">Register</h1>
    <span class="close-btn">
      <img src="https://cdn4.iconfinder.com/data/icons/miu/22/circle_close_delete_-128.png"></img>
    </span>
  
    <form>
      <input type="email" name="email" placeholder="User">
      <a href="#" class="orange-btn">Get new password</a>
  </form>
  </div>
  <div class="OR">
    <h1>OR</h1>
//////////////////

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-app.js";
  import { getAuth ,GoogleAuthProvider, signInWithRedirect, getRedirectResult, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-auth.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {apiKey: "AIzaSyD7srAiDm4-aWPY55oFp6O8xW1rE_dG_D8",
        authDomain: "coplat.firebaseapp.com",
        projectId: "coplat",
        storageBucket: "coplat.appspot.com",
        messagingSenderId: "348998842175",
        appId: "1:348998842175:web:d15416fc0059a86905c58a",
        measurementId: "G-63NWD0T3VD"
  // your config code
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const provider = new GoogleAuthProvider(app);

 login.addEventListener('click',(e) => {
   // signInWithRedirect(auth, provider);


   // redirect the result
  //  getRedirectResult(auth)
  //    .then((result) => {
  //      // This gives you a Google Access Token. You can use it to access Google APIs.
  //      const credential = GoogleAuthProvider.credentialFromResult(result);
  //      const token = credential.accessToken;

  //      // The signed-in user info.
  //      const user = result.user;

  //    }).catch((error) => {
  //      // Handle Errors here.
  //      const errorCode = error.code;
  //      const errorMessage = error.message;
  //      // The email of the user's account used.
  //      const email = error.email;
  //      // The AuthCredential type that was used.
  //      const credential = GoogleAuthProvider.credentialFromError(error);
  //      // ...
       
  // });


// sign in with popup tab
signInWithPopup(auth, provider)
  .then((result) => {
    // This gives you a Google Access Token. You can use it to access the Google API.
    const credential = GoogleAuthProvider.credentialFromResult(result);
    const token = credential.accessToken;
    // The signed-in user info.
    const user = result.user;


    alert(user.displayName);
    // ...
  }).catch((error) => {
    // Handle Errors here.
    const errorCode = error.code;
    const errorMessage = error.message;
    // The email of the user's account used.
    const email = error.email;
    // The AuthCredential type that was used.
    const credential = GoogleAuthProvider.credentialFromError(error);
    // ...

    alert(errorMessage);
  });
 });

  signOut.addEventListener('click',(e) => {

   signOut(auth).then(() => {
    // Sign-out successful.
   }).catch((error) => {
    // An error happened.
   });

  });

</script>

/////////////////////
  
  </div>
  <div class="REG">
    
  </div>
  <button class="social-signin google" id='login'>Log in with Google+</button>
  
  <div class="logo">
    <img src="./css/assets/c.jpg">
  </div>
  <div class="TXT">
    <div class="btn"></div>
  </div>


  <footer class="copR">
    &copy; COPLAT
  </footer>
  </body>
</html>